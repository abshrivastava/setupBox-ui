'use strict';

exports.__esModule = true;

var _ = require('./');

var _2 = _interopRequireDefault(_);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Chain = function (_Action) {
  _inherits(Chain, _Action);

  function Chain(props) {
    _classCallCheck(this, Chain);

    var _this = _possibleConstructorReturn(this, _Action.call(this, props));

    _this.playNext = _this.playNext.bind(_this);
    return _this;
  }

  Chain.prototype.onStart = function onStart() {
    this.props.i = 0;
    this.playCurrent();
  };

  Chain.prototype.playNext = function playNext() {
    var _props = this.props;
    var i = _props.i;
    var order = _props.order;

    if (i < order.length - 1) {
      this.props.i++;
      this.playCurrent();
    }
  };

  Chain.prototype.playCurrent = function playCurrent() {
    var _props2 = this.props;
    var i = _props2.i;
    var order = _props2.order;

    order[i].onComplete = this.playNext;
    order[i].start();
  };

  Chain.prototype.onStop = function onStop() {
    var _props3 = this.props;
    var i = _props3.i;
    var order = _props3.order;

    order[i].stop();
  };

  return Chain;
}(_2.default);

exports.default = function (order) {
  return new Chain({ order: order });
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hY3Rpb25zL2NoYWluLmpzIl0sIm5hbWVzIjpbIkNoYWluIiwicHJvcHMiLCJwbGF5TmV4dCIsImJpbmQiLCJvblN0YXJ0IiwiaSIsInBsYXlDdXJyZW50Iiwib3JkZXIiLCJsZW5ndGgiLCJvbkNvbXBsZXRlIiwic3RhcnQiLCJvblN0b3AiLCJzdG9wIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Ozs7Ozs7OztJQUVNQSxLO1lBQUFBLEs7O0FBQ0osV0FESUEsS0FDSixDQUFZQyxLQUFaLEVBQW1CO0FBQUEsMEJBRGZELEtBQ2U7O0FBQUEsaURBQ2pCLG1CQUFNQyxLQUFOLENBRGlCOztBQUVqQixVQUFLQyxRQUFMLEdBQWdCLE1BQUtBLFFBQUwsQ0FBY0MsSUFBZCxPQUFoQjtBQUZpQjtBQUdsQjs7QUFKR0gsTyxXQU1KSSxPLHNCQUFVO0FBQ1IsU0FBS0gsS0FBTCxDQUFXSSxDQUFYLEdBQWUsQ0FBZjtBQUNBLFNBQUtDLFdBQUw7QUFDRCxHOztBQVRHTixPLFdBV0pFLFEsdUJBQVc7QUFBQSxpQkFDWSxLQUFLRCxLQURqQjtBQUFBLFFBQ0RJLENBREMsVUFDREEsQ0FEQztBQUFBLFFBQ0VFLEtBREYsVUFDRUEsS0FERjs7QUFFVCxRQUFJRixJQUFJRSxNQUFNQyxNQUFOLEdBQWUsQ0FBdkIsRUFBMEI7QUFDeEIsV0FBS1AsS0FBTCxDQUFXSSxDQUFYO0FBQ0EsV0FBS0MsV0FBTDtBQUNEO0FBQ0YsRzs7QUFqQkdOLE8sV0FtQkpNLFcsMEJBQWM7QUFBQSxrQkFDUyxLQUFLTCxLQURkO0FBQUEsUUFDSkksQ0FESSxXQUNKQSxDQURJO0FBQUEsUUFDREUsS0FEQyxXQUNEQSxLQURDOztBQUVaQSxVQUFNRixDQUFOLEVBQVNJLFVBQVQsR0FBc0IsS0FBS1AsUUFBM0I7QUFDQUssVUFBTUYsQ0FBTixFQUFTSyxLQUFUO0FBQ0QsRzs7QUF2QkdWLE8sV0F5QkpXLE0scUJBQVM7QUFBQSxrQkFDYyxLQUFLVixLQURuQjtBQUFBLFFBQ0NJLENBREQsV0FDQ0EsQ0FERDtBQUFBLFFBQ0lFLEtBREosV0FDSUEsS0FESjs7QUFFUEEsVUFBTUYsQ0FBTixFQUFTTyxJQUFUO0FBQ0QsRzs7U0E1QkdaLEs7OztrQkErQlMsVUFBQ08sS0FBRDtBQUFBLFNBQVcsSUFBSVAsS0FBSixDQUFVLEVBQUVPLFlBQUYsRUFBVixDQUFYO0FBQUEsQyIsImZpbGUiOiJjaGFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBY3Rpb24gZnJvbSAnLi8nO1xuXG5jbGFzcyBDaGFpbiBleHRlbmRzIEFjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMucGxheU5leHQgPSB0aGlzLnBsYXlOZXh0LmJpbmQodGhpcyk7XG4gIH1cblxuICBvblN0YXJ0KCkge1xuICAgIHRoaXMucHJvcHMuaSA9IDA7XG4gICAgdGhpcy5wbGF5Q3VycmVudCgpO1xuICB9XG5cbiAgcGxheU5leHQoKSB7XG4gICAgY29uc3QgeyBpLCBvcmRlciB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAoaSA8IG9yZGVyLmxlbmd0aCAtIDEpIHtcbiAgICAgIHRoaXMucHJvcHMuaSsrO1xuICAgICAgdGhpcy5wbGF5Q3VycmVudCgpO1xuICAgIH1cbiAgfVxuXG4gIHBsYXlDdXJyZW50KCkge1xuICAgIGNvbnN0IHsgaSwgb3JkZXIgfSA9IHRoaXMucHJvcHM7XG4gICAgb3JkZXJbaV0ub25Db21wbGV0ZSA9IHRoaXMucGxheU5leHQ7XG4gICAgb3JkZXJbaV0uc3RhcnQoKTtcbiAgfVxuXG4gIG9uU3RvcCgpIHtcbiAgICBjb25zdCB7IGksIG9yZGVyIH0gPSB0aGlzLnByb3BzO1xuICAgIG9yZGVyW2ldLnN0b3AoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCAob3JkZXIpID0+IG5ldyBDaGFpbih7IG9yZGVyIH0pO1xuIl19