'use strict';

exports.__esModule = true;
exports.complexString = exports.color = exports.hsla = exports.hex = exports.rgba = exports.rgbUnit = exports.scale = exports.number = exports.px = exports.percent = exports.degrees = exports.alpha = undefined;

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _childTypes, _childTypes2; /**
                                * Value types
                                *
                                * alpha
                                * degrees
                                * hex
                                * hsla
                                * percent
                                * px
                                * rgbUnit
                                * rgb
                                * scale
                                */


var _filters = require('./filters');

var _utils = require('./utils');

var _utils2 = require('../inc/utils');

// String properties
var RED = 'Red';
var GREEN = 'Green';
var BLUE = 'Blue';
var ALPHA = 'Alpha';
var HUE = 'Hue';
var SATURATION = 'Saturation';
var LIGHTNESS = 'Lightness';

// Templates
var rgbaTemplate = function (colors) {
  return 'rgba(' + colors[RED] + ', ' + colors[GREEN] + ', ' + colors[BLUE] + ', ' + colors[ALPHA] + ')';
};
var hslaTemplate = function (colors) {
  return 'hsla(' + colors[HUE] + ', ' + colors[SATURATION] + ', ' + colors[LIGHTNESS] + ', ' + colors[ALPHA] + ')';
};

// Value types
var alpha = exports.alpha = {
  filter: (0, _filters.restrictBetween)(0, 1)
};

var degrees = exports.degrees = (0, _utils.createUnitType)('deg');
var percent = exports.percent = (0, _utils.createUnitType)('%');
var px = exports.px = (0, _utils.createUnitType)('px');

var number = exports.number = { test: _utils2.isNum };

var scale = exports.scale = {
  default: 1
};

var rgbUnit = exports.rgbUnit = {
  filter: (0, _filters.compose)(
  //http://codepen.io/osublake/full/xGVVaN/
  // (v, value, action) => {
  //   if (action) {
  //     const fromColor = action.from * action.from;
  //     const toColor = action.to * action.to;
  //     return Math.sqrt(action.progress * (toColor - fromColor) + fromColor);
  //   }

  //   return v;
  // },
  (0, _filters.restrictBetween)(0, 255), Math.round)
};

var rgba = exports.rgba = {
  childTypes: (_childTypes = {}, _childTypes[RED] = rgbUnit, _childTypes[GREEN] = rgbUnit, _childTypes[BLUE] = rgbUnit, _childTypes[ALPHA] = alpha, _childTypes),

  test: (0, _utils.isFirstChars)('rgb'),

  parse: (0, _utils.splitColorValues)([RED, GREEN, BLUE, ALPHA]),

  combine: rgbaTemplate
};

var hex = exports.hex = _extends({}, rgba, {

  test: (0, _utils.isFirstChars)('#'),

  parse: function (v) {
    var r = void 0,
        g = void 0,
        b = void 0;

    // If we have 6 characters, ie #FF0000
    if (v.length > 4) {
      r = v.substr(1, 2);
      g = v.substr(3, 2);
      b = v.substr(5, 2);

      // Or we have 3 characters, ie #F00
    } else {
      r = v.substr(1, 1);
      g = v.substr(2, 1);
      b = v.substr(3, 1);
      r += r;
      g += g;
      b += b;
    }

    return {
      Red: parseInt(r, 16),
      Green: parseInt(g, 16),
      Blue: parseInt(b, 16),
      Alpha: 1
    };
  }
});

var hsla = exports.hsla = {
  childTypes: (_childTypes2 = {}, _childTypes2[HUE] = number, _childTypes2[SATURATION] = percent, _childTypes2[LIGHTNESS] = percent, _childTypes2[ALPHA] = alpha, _childTypes2),

  test: (0, _utils.isFirstChars)('hsl'),

  parse: (0, _utils.splitColorValues)([HUE, SATURATION, LIGHTNESS, ALPHA]),

  combine: hslaTemplate
};

var color = exports.color = {
  childTypes: _extends({}, hsla.childTypes, rgba.childTypes),

  test: function (value) {
    return rgba.test(value) || hex.test(value) || hsla.test(value);
  }
};

var FLOAT_REGEX = /(-)?(\d[\d\.]*)/g;
var generateToken = function (token) {
  return '${' + token + '}';
};

var complexString = exports.complexString = {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWx1ZS90eXBlcy5qcyJdLCJuYW1lcyI6WyJSRUQiLCJHUkVFTiIsIkJMVUUiLCJBTFBIQSIsIkhVRSIsIlNBVFVSQVRJT04iLCJMSUdIVE5FU1MiLCJyZ2JhVGVtcGxhdGUiLCJjb2xvcnMiLCJoc2xhVGVtcGxhdGUiLCJhbHBoYSIsImZpbHRlciIsImRlZ3JlZXMiLCJwZXJjZW50IiwicHgiLCJudW1iZXIiLCJ0ZXN0Iiwic2NhbGUiLCJkZWZhdWx0IiwicmdiVW5pdCIsIk1hdGgiLCJyb3VuZCIsInJnYmEiLCJjaGlsZFR5cGVzIiwicGFyc2UiLCJjb21iaW5lIiwiaGV4IiwidiIsInIiLCJnIiwiYiIsImxlbmd0aCIsInN1YnN0ciIsIlJlZCIsInBhcnNlSW50IiwiR3JlZW4iLCJCbHVlIiwiQWxwaGEiLCJoc2xhIiwiY29sb3IiLCJ2YWx1ZSIsIkZMT0FUX1JFR0VYIiwiZ2VuZXJhdGVUb2tlbiIsInRva2VuIiwiY29tcGxleFN0cmluZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7OzsrQkFBQTs7Ozs7Ozs7Ozs7Ozs7O0FBYUE7O0FBQ0E7O0FBQ0E7O0FBRUE7QUFDQSxJQUFNQSxNQUFNLEtBQVo7QUFDQSxJQUFNQyxRQUFRLE9BQWQ7QUFDQSxJQUFNQyxPQUFPLE1BQWI7QUFDQSxJQUFNQyxRQUFRLE9BQWQ7QUFDQSxJQUFNQyxNQUFNLEtBQVo7QUFDQSxJQUFNQyxhQUFhLFlBQW5CO0FBQ0EsSUFBTUMsWUFBWSxXQUFsQjs7QUFFQTtBQUNBLElBQU1DLGVBQWUsVUFBQ0MsTUFBRDtBQUFBLG1CQUFvQkEsT0FBT1IsR0FBUCxDQUFwQixVQUFvQ1EsT0FBT1AsS0FBUCxDQUFwQyxVQUFzRE8sT0FBT04sSUFBUCxDQUF0RCxVQUF1RU0sT0FBT0wsS0FBUCxDQUF2RTtBQUFBLENBQXJCO0FBQ0EsSUFBTU0sZUFBZSxVQUFDRCxNQUFEO0FBQUEsbUJBQW9CQSxPQUFPSixHQUFQLENBQXBCLFVBQW9DSSxPQUFPSCxVQUFQLENBQXBDLFVBQTJERyxPQUFPRixTQUFQLENBQTNELFVBQWlGRSxPQUFPTCxLQUFQLENBQWpGO0FBQUEsQ0FBckI7O0FBRUE7QUFDTyxJQUFNTyx3QkFBUTtBQUNuQkMsVUFBUSw4QkFBZ0IsQ0FBaEIsRUFBbUIsQ0FBbkI7QUFEVyxDQUFkOztBQUlBLElBQU1DLDRCQUFVLDJCQUFlLEtBQWYsQ0FBaEI7QUFDQSxJQUFNQyw0QkFBVSwyQkFBZSxHQUFmLENBQWhCO0FBQ0EsSUFBTUMsa0JBQUssMkJBQWUsSUFBZixDQUFYOztBQUVBLElBQU1DLDBCQUFTLEVBQUVDLG1CQUFGLEVBQWY7O0FBRUEsSUFBTUMsd0JBQVE7QUFDbkJDLFdBQVM7QUFEVSxDQUFkOztBQUlBLElBQU1DLDRCQUFVO0FBQ3JCUixVQUFRO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdDQUFnQixDQUFoQixFQUFtQixHQUFuQixDQVhNLEVBWU5TLEtBQUtDLEtBWkM7QUFEYSxDQUFoQjs7QUFpQkEsSUFBTUMsc0JBQU87QUFDbEJDLDZDQUNHdkIsR0FESCxJQUNTbUIsT0FEVCxjQUVHbEIsS0FGSCxJQUVXa0IsT0FGWCxjQUdHakIsSUFISCxJQUdVaUIsT0FIVixjQUlHaEIsS0FKSCxJQUlXTyxLQUpYLGNBRGtCOztBQVFsQk0sUUFBTSx5QkFBYSxLQUFiLENBUlk7O0FBVWxCUSxTQUFPLDZCQUFpQixDQUFDeEIsR0FBRCxFQUFNQyxLQUFOLEVBQWFDLElBQWIsRUFBbUJDLEtBQW5CLENBQWpCLENBVlc7O0FBWWxCc0IsV0FBU2xCO0FBWlMsQ0FBYjs7QUFlQSxJQUFNbUIsaUNBQ1JKLElBRFE7O0FBR1hOLFFBQU0seUJBQWEsR0FBYixDQUhLOztBQUtYUSxTQUFPLFVBQUNHLENBQUQsRUFBTztBQUNaLFFBQUlDLFVBQUo7QUFBQSxRQUFPQyxVQUFQO0FBQUEsUUFBVUMsVUFBVjs7QUFFQTtBQUNBLFFBQUlILEVBQUVJLE1BQUYsR0FBVyxDQUFmLEVBQWtCO0FBQ2hCSCxVQUFJRCxFQUFFSyxNQUFGLENBQVMsQ0FBVCxFQUFZLENBQVosQ0FBSjtBQUNBSCxVQUFJRixFQUFFSyxNQUFGLENBQVMsQ0FBVCxFQUFZLENBQVosQ0FBSjtBQUNBRixVQUFJSCxFQUFFSyxNQUFGLENBQVMsQ0FBVCxFQUFZLENBQVosQ0FBSjs7QUFFRjtBQUNDLEtBTkQsTUFNTztBQUNMSixVQUFJRCxFQUFFSyxNQUFGLENBQVMsQ0FBVCxFQUFZLENBQVosQ0FBSjtBQUNBSCxVQUFJRixFQUFFSyxNQUFGLENBQVMsQ0FBVCxFQUFZLENBQVosQ0FBSjtBQUNBRixVQUFJSCxFQUFFSyxNQUFGLENBQVMsQ0FBVCxFQUFZLENBQVosQ0FBSjtBQUNBSixXQUFLQSxDQUFMO0FBQ0FDLFdBQUtBLENBQUw7QUFDQUMsV0FBS0EsQ0FBTDtBQUNEOztBQUVELFdBQU87QUFDTEcsV0FBS0MsU0FBU04sQ0FBVCxFQUFZLEVBQVosQ0FEQTtBQUVMTyxhQUFPRCxTQUFTTCxDQUFULEVBQVksRUFBWixDQUZGO0FBR0xPLFlBQU1GLFNBQVNKLENBQVQsRUFBWSxFQUFaLENBSEQ7QUFJTE8sYUFBTztBQUpGLEtBQVA7QUFNRDtBQTlCVSxFQUFOOztBQWlDQSxJQUFNQyxzQkFBTztBQUNsQmYsK0NBQ0duQixHQURILElBQ1NXLE1BRFQsZUFFR1YsVUFGSCxJQUVnQlEsT0FGaEIsZUFHR1AsU0FISCxJQUdlTyxPQUhmLGVBSUdWLEtBSkgsSUFJV08sS0FKWCxlQURrQjs7QUFRbEJNLFFBQU0seUJBQWEsS0FBYixDQVJZOztBQVVsQlEsU0FBTyw2QkFBaUIsQ0FBQ3BCLEdBQUQsRUFBTUMsVUFBTixFQUFrQkMsU0FBbEIsRUFBNkJILEtBQTdCLENBQWpCLENBVlc7O0FBWWxCc0IsV0FBU2hCO0FBWlMsQ0FBYjs7QUFlQSxJQUFNOEIsd0JBQVE7QUFDbkJoQiwyQkFDS2UsS0FBS2YsVUFEVixFQUVLRCxLQUFLQyxVQUZWLENBRG1COztBQU1uQlAsUUFBTSxVQUFDd0IsS0FBRDtBQUFBLFdBQVdsQixLQUFLTixJQUFMLENBQVV3QixLQUFWLEtBQW9CZCxJQUFJVixJQUFKLENBQVN3QixLQUFULENBQXBCLElBQXVDRixLQUFLdEIsSUFBTCxDQUFVd0IsS0FBVixDQUFsRDtBQUFBO0FBTmEsQ0FBZDs7QUFVUCxJQUFNQyxjQUFjLGtCQUFwQjtBQUNBLElBQU1DLGdCQUFnQixVQUFDQyxLQUFEO0FBQUEsU0FBVyxPQUFPQSxLQUFQLEdBQWUsR0FBMUI7QUFBQSxDQUF0Qjs7QUFFTyxJQUFNQyx3Q0FBZ0IsRUFBdEIiLCJmaWxlIjoidHlwZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFZhbHVlIHR5cGVzXG4gKlxuICogYWxwaGFcbiAqIGRlZ3JlZXNcbiAqIGhleFxuICogaHNsYVxuICogcGVyY2VudFxuICogcHhcbiAqIHJnYlVuaXRcbiAqIHJnYlxuICogc2NhbGVcbiAqL1xuaW1wb3J0IHsgcmVzdHJpY3RCZXR3ZWVuLCBjb21wb3NlIH0gZnJvbSAnLi9maWx0ZXJzJztcbmltcG9ydCB7IGNyZWF0ZVVuaXRUeXBlLCBpc0ZpcnN0Q2hhcnMsIHNwbGl0Q29sb3JWYWx1ZXMgfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCB7IGlzTnVtIH0gZnJvbSAnLi4vaW5jL3V0aWxzJztcblxuLy8gU3RyaW5nIHByb3BlcnRpZXNcbmNvbnN0IFJFRCA9ICdSZWQnO1xuY29uc3QgR1JFRU4gPSAnR3JlZW4nO1xuY29uc3QgQkxVRSA9ICdCbHVlJztcbmNvbnN0IEFMUEhBID0gJ0FscGhhJztcbmNvbnN0IEhVRSA9ICdIdWUnO1xuY29uc3QgU0FUVVJBVElPTiA9ICdTYXR1cmF0aW9uJztcbmNvbnN0IExJR0hUTkVTUyA9ICdMaWdodG5lc3MnO1xuXG4vLyBUZW1wbGF0ZXNcbmNvbnN0IHJnYmFUZW1wbGF0ZSA9IChjb2xvcnMpID0+IGByZ2JhKCR7Y29sb3JzW1JFRF19LCAke2NvbG9yc1tHUkVFTl19LCAke2NvbG9yc1tCTFVFXX0sICR7Y29sb3JzW0FMUEhBXX0pYDtcbmNvbnN0IGhzbGFUZW1wbGF0ZSA9IChjb2xvcnMpID0+IGBoc2xhKCR7Y29sb3JzW0hVRV19LCAke2NvbG9yc1tTQVRVUkFUSU9OXX0sICR7Y29sb3JzW0xJR0hUTkVTU119LCAke2NvbG9yc1tBTFBIQV19KWA7XG5cbi8vIFZhbHVlIHR5cGVzXG5leHBvcnQgY29uc3QgYWxwaGEgPSB7XG4gIGZpbHRlcjogcmVzdHJpY3RCZXR3ZWVuKDAsIDEpXG59O1xuXG5leHBvcnQgY29uc3QgZGVncmVlcyA9IGNyZWF0ZVVuaXRUeXBlKCdkZWcnKTtcbmV4cG9ydCBjb25zdCBwZXJjZW50ID0gY3JlYXRlVW5pdFR5cGUoJyUnKTtcbmV4cG9ydCBjb25zdCBweCA9IGNyZWF0ZVVuaXRUeXBlKCdweCcpO1xuXG5leHBvcnQgY29uc3QgbnVtYmVyID0geyB0ZXN0OiBpc051bSB9O1xuXG5leHBvcnQgY29uc3Qgc2NhbGUgPSB7XG4gIGRlZmF1bHQ6IDFcbn07XG5cbmV4cG9ydCBjb25zdCByZ2JVbml0ID0ge1xuICBmaWx0ZXI6IGNvbXBvc2UoXG4gICAgLy9odHRwOi8vY29kZXBlbi5pby9vc3VibGFrZS9mdWxsL3hHVlZhTi9cbiAgICAvLyAodiwgdmFsdWUsIGFjdGlvbikgPT4ge1xuICAgIC8vICAgaWYgKGFjdGlvbikge1xuICAgIC8vICAgICBjb25zdCBmcm9tQ29sb3IgPSBhY3Rpb24uZnJvbSAqIGFjdGlvbi5mcm9tO1xuICAgIC8vICAgICBjb25zdCB0b0NvbG9yID0gYWN0aW9uLnRvICogYWN0aW9uLnRvO1xuICAgIC8vICAgICByZXR1cm4gTWF0aC5zcXJ0KGFjdGlvbi5wcm9ncmVzcyAqICh0b0NvbG9yIC0gZnJvbUNvbG9yKSArIGZyb21Db2xvcik7XG4gICAgLy8gICB9XG5cbiAgICAvLyAgIHJldHVybiB2O1xuICAgIC8vIH0sXG4gICAgcmVzdHJpY3RCZXR3ZWVuKDAsIDI1NSksXG4gICAgTWF0aC5yb3VuZFxuICApXG59O1xuXG5leHBvcnQgY29uc3QgcmdiYSA9IHtcbiAgY2hpbGRUeXBlczoge1xuICAgIFtSRURdOiByZ2JVbml0LFxuICAgIFtHUkVFTl06IHJnYlVuaXQsXG4gICAgW0JMVUVdOiByZ2JVbml0LFxuICAgIFtBTFBIQV06IGFscGhhXG4gIH0sXG5cbiAgdGVzdDogaXNGaXJzdENoYXJzKCdyZ2InKSxcblxuICBwYXJzZTogc3BsaXRDb2xvclZhbHVlcyhbUkVELCBHUkVFTiwgQkxVRSwgQUxQSEFdKSxcblxuICBjb21iaW5lOiByZ2JhVGVtcGxhdGVcbn07XG5cbmV4cG9ydCBjb25zdCBoZXggPSB7XG4gIC4uLnJnYmEsXG5cbiAgdGVzdDogaXNGaXJzdENoYXJzKCcjJyksXG5cbiAgcGFyc2U6ICh2KSA9PiB7XG4gICAgbGV0IHIsIGcsIGI7XG5cbiAgICAvLyBJZiB3ZSBoYXZlIDYgY2hhcmFjdGVycywgaWUgI0ZGMDAwMFxuICAgIGlmICh2Lmxlbmd0aCA+IDQpIHtcbiAgICAgIHIgPSB2LnN1YnN0cigxLCAyKTtcbiAgICAgIGcgPSB2LnN1YnN0cigzLCAyKTtcbiAgICAgIGIgPSB2LnN1YnN0cig1LCAyKTtcblxuICAgIC8vIE9yIHdlIGhhdmUgMyBjaGFyYWN0ZXJzLCBpZSAjRjAwXG4gICAgfSBlbHNlIHtcbiAgICAgIHIgPSB2LnN1YnN0cigxLCAxKTtcbiAgICAgIGcgPSB2LnN1YnN0cigyLCAxKTtcbiAgICAgIGIgPSB2LnN1YnN0cigzLCAxKTtcbiAgICAgIHIgKz0gcjtcbiAgICAgIGcgKz0gZztcbiAgICAgIGIgKz0gYjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgUmVkOiBwYXJzZUludChyLCAxNiksXG4gICAgICBHcmVlbjogcGFyc2VJbnQoZywgMTYpLFxuICAgICAgQmx1ZTogcGFyc2VJbnQoYiwgMTYpLFxuICAgICAgQWxwaGE6IDFcbiAgICB9O1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgaHNsYSA9IHtcbiAgY2hpbGRUeXBlczoge1xuICAgIFtIVUVdOiBudW1iZXIsXG4gICAgW1NBVFVSQVRJT05dOiBwZXJjZW50LFxuICAgIFtMSUdIVE5FU1NdOiBwZXJjZW50LFxuICAgIFtBTFBIQV06IGFscGhhXG4gIH0sXG5cbiAgdGVzdDogaXNGaXJzdENoYXJzKCdoc2wnKSxcblxuICBwYXJzZTogc3BsaXRDb2xvclZhbHVlcyhbSFVFLCBTQVRVUkFUSU9OLCBMSUdIVE5FU1MsIEFMUEhBXSksXG5cbiAgY29tYmluZTogaHNsYVRlbXBsYXRlXG59O1xuXG5leHBvcnQgY29uc3QgY29sb3IgPSB7XG4gIGNoaWxkVHlwZXM6IHtcbiAgICAuLi5oc2xhLmNoaWxkVHlwZXMsXG4gICAgLi4ucmdiYS5jaGlsZFR5cGVzXG4gIH0sXG5cbiAgdGVzdDogKHZhbHVlKSA9PiByZ2JhLnRlc3QodmFsdWUpIHx8IGhleC50ZXN0KHZhbHVlKSB8fCBoc2xhLnRlc3QodmFsdWUpXG59O1xuXG5cbmNvbnN0IEZMT0FUX1JFR0VYID0gLygtKT8oXFxkW1xcZFxcLl0qKS9nO1xuY29uc3QgZ2VuZXJhdGVUb2tlbiA9ICh0b2tlbikgPT4gJyR7JyArIHRva2VuICsgJ30nO1xuXG5leHBvcnQgY29uc3QgY29tcGxleFN0cmluZyA9IHtcblxufTtcbiJdfQ==