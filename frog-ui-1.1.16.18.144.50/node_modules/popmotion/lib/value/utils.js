'use strict';

exports.__esModule = true;
exports.createDelimited = exports.getColorValues = exports.findValueAndUnit = exports.createUnitType = exports.isFirstChars = exports.contains = undefined;
exports.splitColorValues = splitColorValues;

var _utils = require('../inc/utils');

var _filters = require('./filters');

/**
 *  Returns a function that will check any argument for `term`
 * `contains('needle')('haystack')`
 */
var contains = exports.contains = function (term) {
  return function (v) {
    return (0, _utils.isString)(term) && v.indexOf(term) !== -1;
  };
};

/**
 *  Returns a function that will check to see if an argument is
 *  the first characters in the provided `term`
 * `isFirstChars('needle')('haystack')`
 */
var isFirstChars = exports.isFirstChars = function (term) {
  return function (v) {
    return (0, _utils.isString)(term) && v.indexOf(term) === 0;
  };
};

/**
 * Create a unit value type
 */
var createUnitType = exports.createUnitType = function (type) {
  return {
    test: contains(type),
    parse: parseFloat,
    filter: (0, _filters.appendUnit)(type)
  };
};

/**
 * Creates a function that will split color
 * values from string into an object of properties
 * `splitColorValues(['Red', 'Green', 'Blue'])('rgba(0,0,0)')`
 */
function splitColorValues(terms) {
  var numTerms = terms.length;

  return function (v) {
    var values = {};
    var valuesArray = (0, _utils.splitCommaDelimited)((0, _utils.getValueFromFunctionString)(v));

    for (var i = 0; i < numTerms; i++) {
      values[terms[i]] = valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;
    }

    return values;
  };
}

/*
  Split a value into a value/unit object
  
    "200px" -> { value: 200, unit: "px" }
    
  @param [string]: Value to split
  @return [object]: Object with value and unit props
*/
var findValueAndUnit = exports.findValueAndUnit = function (value) {
  if (value.match) {
    var splitValue = value.match(/(-?\d*\.?\d*)(.*)/);

    return {
      value: parseFloat(splitValue[1]),
      unit: splitValue[2]
    };
  } else {
    return { value: value };
  }
};

/*
  Split color string into map of color properties

  "rgba(255, 255, 255, 0)", ["Red", 'Green", "Blue", "Alpha"]

  { Red: 255... }
*/
var getColorValues = exports.getColorValues = function (value, colorTerms) {
  var numColorTerms = colorTerms.length;
  var colorValues = {};
  var colors = (0, _utils.splitCommaDelimited)((0, _utils.getValueFromFunctionString)(value));

  for (var i = 0; i < numColorTerms; i++) {
    colorValues[colorTerms[i]] = colors[i] !== undefined ? colors[i] : 1;
  }

  return colorValues;
};

/*
  Get value from function string

  "translateX(20px)" -> "20px"
*/
// export const getValueFromFunctionString = (value) => value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));


var createDelimited = exports.createDelimited = function (values, terms, delimiter, chop) {
  var numTerms = terms.length;
  var combined = '';

  for (var i = 0; i < numTerms; i++) {
    var term = terms[i];
    if (values.hasOwnProperty(term)) {
      combined += values[term] + delimiter;
    }
  }

  if (chop) {
    combined = combined.slice(0, -chop);
  }

  return combined;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy92YWx1ZS91dGlscy5qcyJdLCJuYW1lcyI6WyJzcGxpdENvbG9yVmFsdWVzIiwiY29udGFpbnMiLCJ0ZXJtIiwidiIsImluZGV4T2YiLCJpc0ZpcnN0Q2hhcnMiLCJjcmVhdGVVbml0VHlwZSIsInR5cGUiLCJ0ZXN0IiwicGFyc2UiLCJwYXJzZUZsb2F0IiwiZmlsdGVyIiwidGVybXMiLCJudW1UZXJtcyIsImxlbmd0aCIsInZhbHVlcyIsInZhbHVlc0FycmF5IiwiaSIsInVuZGVmaW5lZCIsImZpbmRWYWx1ZUFuZFVuaXQiLCJ2YWx1ZSIsIm1hdGNoIiwic3BsaXRWYWx1ZSIsInVuaXQiLCJnZXRDb2xvclZhbHVlcyIsImNvbG9yVGVybXMiLCJudW1Db2xvclRlcm1zIiwiY29sb3JWYWx1ZXMiLCJjb2xvcnMiLCJjcmVhdGVEZWxpbWl0ZWQiLCJkZWxpbWl0ZXIiLCJjaG9wIiwiY29tYmluZWQiLCJoYXNPd25Qcm9wZXJ0eSIsInNsaWNlIl0sIm1hcHBpbmdzIjoiOzs7O1FBb0NnQkEsZ0IsR0FBQUEsZ0I7O0FBcENoQjs7QUFDQTs7QUFFQTs7OztBQUlPLElBQU1DLDhCQUFXLFVBQUNDLElBQUQ7QUFBQSxTQUFVLFVBQUNDLENBQUQsRUFBTztBQUN2QyxXQUFRLHFCQUFTRCxJQUFULEtBQWtCQyxFQUFFQyxPQUFGLENBQVVGLElBQVYsTUFBb0IsQ0FBQyxDQUEvQztBQUNELEdBRnVCO0FBQUEsQ0FBakI7O0FBSVA7Ozs7O0FBS08sSUFBTUcsc0NBQWUsVUFBQ0gsSUFBRDtBQUFBLFNBQVUsVUFBQ0MsQ0FBRCxFQUFPO0FBQzNDLFdBQVEscUJBQVNELElBQVQsS0FBa0JDLEVBQUVDLE9BQUYsQ0FBVUYsSUFBVixNQUFvQixDQUE5QztBQUNELEdBRjJCO0FBQUEsQ0FBckI7O0FBSVA7OztBQUdPLElBQU1JLDBDQUFpQixVQUFDQyxJQUFELEVBQVU7QUFDdEMsU0FBTztBQUNMQyxVQUFNUCxTQUFTTSxJQUFULENBREQ7QUFFTEUsV0FBT0MsVUFGRjtBQUdMQyxZQUFRLHlCQUFXSixJQUFYO0FBSEgsR0FBUDtBQUtELENBTk07O0FBUVA7Ozs7O0FBS08sU0FBU1AsZ0JBQVQsQ0FBMEJZLEtBQTFCLEVBQWlDO0FBQ3RDLE1BQU1DLFdBQVdELE1BQU1FLE1BQXZCOztBQUVBLFNBQU8sVUFBVVgsQ0FBVixFQUFhO0FBQ2xCLFFBQU1ZLFNBQVMsRUFBZjtBQUNBLFFBQU1DLGNBQWMsZ0NBQW9CLHVDQUEyQmIsQ0FBM0IsQ0FBcEIsQ0FBcEI7O0FBRUEsU0FBSyxJQUFJYyxJQUFJLENBQWIsRUFBZ0JBLElBQUlKLFFBQXBCLEVBQThCSSxHQUE5QixFQUFtQztBQUNqQ0YsYUFBT0gsTUFBTUssQ0FBTixDQUFQLElBQW9CRCxZQUFZQyxDQUFaLE1BQW1CQyxTQUFwQixHQUFpQ1IsV0FBV00sWUFBWUMsQ0FBWixDQUFYLENBQWpDLEdBQThELENBQWpGO0FBQ0Q7O0FBRUQsV0FBT0YsTUFBUDtBQUNELEdBVEQ7QUFVRDs7QUFFRDs7Ozs7Ozs7QUFRTyxJQUFNSSw4Q0FBbUIsVUFBQ0MsS0FBRCxFQUFXO0FBQ3pDLE1BQUlBLE1BQU1DLEtBQVYsRUFBaUI7QUFDZixRQUFNQyxhQUFhRixNQUFNQyxLQUFOLENBQVksbUJBQVosQ0FBbkI7O0FBRUEsV0FBTztBQUNMRCxhQUFPVixXQUFXWSxXQUFXLENBQVgsQ0FBWCxDQURGO0FBRUxDLFlBQU9ELFdBQVcsQ0FBWDtBQUZGLEtBQVA7QUFJRCxHQVBELE1BT087QUFDTCxXQUFPLEVBQUVGLFlBQUYsRUFBUDtBQUNEO0FBQ0YsQ0FYTTs7QUFhUDs7Ozs7OztBQU9PLElBQU1JLDBDQUFpQixVQUFDSixLQUFELEVBQVFLLFVBQVIsRUFBdUI7QUFDbkQsTUFBTUMsZ0JBQWdCRCxXQUFXWCxNQUFqQztBQUNBLE1BQU1hLGNBQWMsRUFBcEI7QUFDQSxNQUFNQyxTQUFTLGdDQUFvQix1Q0FBMkJSLEtBQTNCLENBQXBCLENBQWY7O0FBRUEsT0FBSyxJQUFJSCxJQUFJLENBQWIsRUFBZ0JBLElBQUlTLGFBQXBCLEVBQW1DVCxHQUFuQyxFQUF3QztBQUN0Q1UsZ0JBQVlGLFdBQVdSLENBQVgsQ0FBWixJQUE4QlcsT0FBT1gsQ0FBUCxNQUFjQyxTQUFmLEdBQTRCVSxPQUFPWCxDQUFQLENBQTVCLEdBQXdDLENBQXJFO0FBQ0Q7O0FBRUQsU0FBT1UsV0FBUDtBQUNELENBVk07O0FBWVA7Ozs7O0FBS0E7OztBQUdPLElBQU1FLDRDQUFrQixVQUFDZCxNQUFELEVBQVNILEtBQVQsRUFBZ0JrQixTQUFoQixFQUEyQkMsSUFBM0IsRUFBb0M7QUFDakUsTUFBTWxCLFdBQVdELE1BQU1FLE1BQXZCO0FBQ0EsTUFBSWtCLFdBQVcsRUFBZjs7QUFFQSxPQUFLLElBQUlmLElBQUksQ0FBYixFQUFnQkEsSUFBSUosUUFBcEIsRUFBOEJJLEdBQTlCLEVBQW1DO0FBQ2pDLFFBQU1mLE9BQU9VLE1BQU1LLENBQU4sQ0FBYjtBQUNBLFFBQUlGLE9BQU9rQixjQUFQLENBQXNCL0IsSUFBdEIsQ0FBSixFQUFpQztBQUMvQjhCLGtCQUFZakIsT0FBT2IsSUFBUCxJQUFlNEIsU0FBM0I7QUFDRDtBQUNGOztBQUVELE1BQUlDLElBQUosRUFBVTtBQUNSQyxlQUFXQSxTQUFTRSxLQUFULENBQWUsQ0FBZixFQUFrQixDQUFDSCxJQUFuQixDQUFYO0FBQ0Q7O0FBRUQsU0FBT0MsUUFBUDtBQUNELENBaEJNIiwiZmlsZSI6InV0aWxzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3BsaXRDb21tYURlbGltaXRlZCwgZ2V0VmFsdWVGcm9tRnVuY3Rpb25TdHJpbmcsIGlzU3RyaW5nIH0gZnJvbSAnLi4vaW5jL3V0aWxzJztcbmltcG9ydCB7IGFwcGVuZFVuaXQgfSBmcm9tICcuL2ZpbHRlcnMnO1xuXG4vKipcbiAqICBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGNoZWNrIGFueSBhcmd1bWVudCBmb3IgYHRlcm1gXG4gKiBgY29udGFpbnMoJ25lZWRsZScpKCdoYXlzdGFjaycpYFxuICovXG5leHBvcnQgY29uc3QgY29udGFpbnMgPSAodGVybSkgPT4gKHYpID0+IHtcbiAgcmV0dXJuIChpc1N0cmluZyh0ZXJtKSAmJiB2LmluZGV4T2YodGVybSkgIT09IC0xKVxufTtcblxuLyoqXG4gKiAgUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBjaGVjayB0byBzZWUgaWYgYW4gYXJndW1lbnQgaXNcbiAqICB0aGUgZmlyc3QgY2hhcmFjdGVycyBpbiB0aGUgcHJvdmlkZWQgYHRlcm1gXG4gKiBgaXNGaXJzdENoYXJzKCduZWVkbGUnKSgnaGF5c3RhY2snKWBcbiAqL1xuZXhwb3J0IGNvbnN0IGlzRmlyc3RDaGFycyA9ICh0ZXJtKSA9PiAodikgPT4ge1xuICByZXR1cm4gKGlzU3RyaW5nKHRlcm0pICYmIHYuaW5kZXhPZih0ZXJtKSA9PT0gMCk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHVuaXQgdmFsdWUgdHlwZVxuICovXG5leHBvcnQgY29uc3QgY3JlYXRlVW5pdFR5cGUgPSAodHlwZSkgPT4ge1xuICByZXR1cm4ge1xuICAgIHRlc3Q6IGNvbnRhaW5zKHR5cGUpLFxuICAgIHBhcnNlOiBwYXJzZUZsb2F0LFxuICAgIGZpbHRlcjogYXBwZW5kVW5pdCh0eXBlKVxuICB9O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCB3aWxsIHNwbGl0IGNvbG9yXG4gKiB2YWx1ZXMgZnJvbSBzdHJpbmcgaW50byBhbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuICogYHNwbGl0Q29sb3JWYWx1ZXMoWydSZWQnLCAnR3JlZW4nLCAnQmx1ZSddKSgncmdiYSgwLDAsMCknKWBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0Q29sb3JWYWx1ZXModGVybXMpIHtcbiAgY29uc3QgbnVtVGVybXMgPSB0ZXJtcy5sZW5ndGg7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uICh2KSB7XG4gICAgY29uc3QgdmFsdWVzID0ge307XG4gICAgY29uc3QgdmFsdWVzQXJyYXkgPSBzcGxpdENvbW1hRGVsaW1pdGVkKGdldFZhbHVlRnJvbUZ1bmN0aW9uU3RyaW5nKHYpKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtVGVybXM7IGkrKykge1xuICAgICAgdmFsdWVzW3Rlcm1zW2ldXSA9ICh2YWx1ZXNBcnJheVtpXSAhPT0gdW5kZWZpbmVkKSA/IHBhcnNlRmxvYXQodmFsdWVzQXJyYXlbaV0pIDogMTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9XG59XG5cbi8qXG4gIFNwbGl0IGEgdmFsdWUgaW50byBhIHZhbHVlL3VuaXQgb2JqZWN0XG4gIFxuICAgIFwiMjAwcHhcIiAtPiB7IHZhbHVlOiAyMDAsIHVuaXQ6IFwicHhcIiB9XG4gICAgXG4gIEBwYXJhbSBbc3RyaW5nXTogVmFsdWUgdG8gc3BsaXRcbiAgQHJldHVybiBbb2JqZWN0XTogT2JqZWN0IHdpdGggdmFsdWUgYW5kIHVuaXQgcHJvcHNcbiovXG5leHBvcnQgY29uc3QgZmluZFZhbHVlQW5kVW5pdCA9ICh2YWx1ZSkgPT4ge1xuICBpZiAodmFsdWUubWF0Y2gpIHtcbiAgICBjb25zdCBzcGxpdFZhbHVlID0gdmFsdWUubWF0Y2goLygtP1xcZCpcXC4/XFxkKikoLiopLyk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IHBhcnNlRmxvYXQoc3BsaXRWYWx1ZVsxXSksXG4gICAgICB1bml0OiAgc3BsaXRWYWx1ZVsyXVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgdmFsdWUgfTtcbiAgfVxufTtcblxuLypcbiAgU3BsaXQgY29sb3Igc3RyaW5nIGludG8gbWFwIG9mIGNvbG9yIHByb3BlcnRpZXNcblxuICBcInJnYmEoMjU1LCAyNTUsIDI1NSwgMClcIiwgW1wiUmVkXCIsICdHcmVlblwiLCBcIkJsdWVcIiwgXCJBbHBoYVwiXVxuXG4gIHsgUmVkOiAyNTUuLi4gfVxuKi9cbmV4cG9ydCBjb25zdCBnZXRDb2xvclZhbHVlcyA9ICh2YWx1ZSwgY29sb3JUZXJtcykgPT4ge1xuICBjb25zdCBudW1Db2xvclRlcm1zID0gY29sb3JUZXJtcy5sZW5ndGg7XG4gIGNvbnN0IGNvbG9yVmFsdWVzID0ge307XG4gIGNvbnN0IGNvbG9ycyA9IHNwbGl0Q29tbWFEZWxpbWl0ZWQoZ2V0VmFsdWVGcm9tRnVuY3Rpb25TdHJpbmcodmFsdWUpKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvbG9yVGVybXM7IGkrKykge1xuICAgIGNvbG9yVmFsdWVzW2NvbG9yVGVybXNbaV1dID0gKGNvbG9yc1tpXSAhPT0gdW5kZWZpbmVkKSA/IGNvbG9yc1tpXSA6IDE7XG4gIH1cblxuICByZXR1cm4gY29sb3JWYWx1ZXM7XG59O1xuXG4vKlxuICBHZXQgdmFsdWUgZnJvbSBmdW5jdGlvbiBzdHJpbmdcblxuICBcInRyYW5zbGF0ZVgoMjBweClcIiAtPiBcIjIwcHhcIlxuKi9cbi8vIGV4cG9ydCBjb25zdCBnZXRWYWx1ZUZyb21GdW5jdGlvblN0cmluZyA9ICh2YWx1ZSkgPT4gdmFsdWUuc3Vic3RyaW5nKHZhbHVlLmluZGV4T2YoJygnKSArIDEsIHZhbHVlLmxhc3RJbmRleE9mKCcpJykpO1xuXG5cbmV4cG9ydCBjb25zdCBjcmVhdGVEZWxpbWl0ZWQgPSAodmFsdWVzLCB0ZXJtcywgZGVsaW1pdGVyLCBjaG9wKSA9PiB7XG4gIGNvbnN0IG51bVRlcm1zID0gdGVybXMubGVuZ3RoO1xuICBsZXQgY29tYmluZWQgPSAnJztcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVRlcm1zOyBpKyspIHtcbiAgICBjb25zdCB0ZXJtID0gdGVybXNbaV07XG4gICAgaWYgKHZhbHVlcy5oYXNPd25Qcm9wZXJ0eSh0ZXJtKSkge1xuICAgICAgY29tYmluZWQgKz0gdmFsdWVzW3Rlcm1dICsgZGVsaW1pdGVyO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjaG9wKSB7XG4gICAgY29tYmluZWQgPSBjb21iaW5lZC5zbGljZSgwLCAtY2hvcCk7XG4gIH1cblxuICByZXR1cm4gY29tYmluZWQ7XG59O1xuIl19