'use strict';

exports.__esModule = true;
exports.default = sequence;

var _Action2 = require('./Action');

var _Action3 = _interopRequireDefault(_Action2);

var _group = require('./group');

var _group2 = _interopRequireDefault(_group);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Sequence = function (_Action) {
  _inherits(Sequence, _Action);

  function Sequence(props) {
    _classCallCheck(this, Sequence);

    var _this = _possibleConstructorReturn(this, _Action.call(this, props));

    _this.playNext = _this.playNext.bind(_this);
    return _this;
  }

  Sequence.prototype.playNext = function playNext() {
    if (this.props.i < this.props.order.length - 1) {
      this.props.i += 1;
      this.props.order[this.props.i].onComplete = this.playNext;
      this.props.order[this.props.i].start();
    }
  };

  Sequence.prototype.onStart = function onStart() {
    this.props.i = 0;

    this.props.order[this.props.i].onComplete = this.playNext;
  };

  Sequence.prototype.onStop = function onStop() {
    this.props.order[this.props.i].stop();
  };

  return Sequence;
}(_Action3.default);

function sequence(order) {
  return new Sequence({ order: order });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zaW1wbGUtYWN0aW9ucy9zZXF1ZW5jZS5qcyJdLCJuYW1lcyI6WyJzZXF1ZW5jZSIsIlNlcXVlbmNlIiwicHJvcHMiLCJwbGF5TmV4dCIsImJpbmQiLCJpIiwib3JkZXIiLCJsZW5ndGgiLCJvbkNvbXBsZXRlIiwic3RhcnQiLCJvblN0YXJ0Iiwib25TdG9wIiwic3RvcCJdLCJtYXBwaW5ncyI6Ijs7O2tCQTRCd0JBLFE7O0FBNUJ4Qjs7OztBQUNBOzs7Ozs7Ozs7Ozs7SUFFTUMsUTtZQUFBQSxROztBQUNKLFdBRElBLFFBQ0osQ0FBWUMsS0FBWixFQUFtQjtBQUFBLDBCQURmRCxRQUNlOztBQUFBLGlEQUNqQixtQkFBTUMsS0FBTixDQURpQjs7QUFFakIsVUFBS0MsUUFBTCxHQUFnQixNQUFLQSxRQUFMLENBQWNDLElBQWQsT0FBaEI7QUFGaUI7QUFHbEI7O0FBSkdILFUsV0FNSkUsUSx1QkFBVztBQUNULFFBQUksS0FBS0QsS0FBTCxDQUFXRyxDQUFYLEdBQWUsS0FBS0gsS0FBTCxDQUFXSSxLQUFYLENBQWlCQyxNQUFqQixHQUEwQixDQUE3QyxFQUFnRDtBQUM5QyxXQUFLTCxLQUFMLENBQVdHLENBQVgsSUFBZ0IsQ0FBaEI7QUFDQSxXQUFLSCxLQUFMLENBQVdJLEtBQVgsQ0FBaUIsS0FBS0osS0FBTCxDQUFXRyxDQUE1QixFQUErQkcsVUFBL0IsR0FBNEMsS0FBS0wsUUFBakQ7QUFDQSxXQUFLRCxLQUFMLENBQVdJLEtBQVgsQ0FBaUIsS0FBS0osS0FBTCxDQUFXRyxDQUE1QixFQUErQkksS0FBL0I7QUFDRDtBQUNGLEc7O0FBWkdSLFUsV0FjSlMsTyxzQkFBVTtBQUNSLFNBQUtSLEtBQUwsQ0FBV0csQ0FBWCxHQUFlLENBQWY7O0FBRUEsU0FBS0gsS0FBTCxDQUFXSSxLQUFYLENBQWlCLEtBQUtKLEtBQUwsQ0FBV0csQ0FBNUIsRUFBK0JHLFVBQS9CLEdBQTRDLEtBQUtMLFFBQWpEO0FBQ0QsRzs7QUFsQkdGLFUsV0FvQkpVLE0scUJBQVM7QUFDUCxTQUFLVCxLQUFMLENBQVdJLEtBQVgsQ0FBaUIsS0FBS0osS0FBTCxDQUFXRyxDQUE1QixFQUErQk8sSUFBL0I7QUFDRCxHOztTQXRCR1gsUTs7O0FBeUJTLFNBQVNELFFBQVQsQ0FBa0JNLEtBQWxCLEVBQXlCO0FBQ3RDLFNBQU8sSUFBSUwsUUFBSixDQUFhLEVBQUVLLFlBQUYsRUFBYixDQUFQO0FBQ0QiLCJmaWxlIjoic2VxdWVuY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWN0aW9uIGZyb20gJy4vQWN0aW9uJztcbmltcG9ydCBhY3Rpb25Hcm91cCBmcm9tICcuL2dyb3VwJztcblxuY2xhc3MgU2VxdWVuY2UgZXh0ZW5kcyBBY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnBsYXlOZXh0ID0gdGhpcy5wbGF5TmV4dC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgcGxheU5leHQoKSB7XG4gICAgaWYgKHRoaXMucHJvcHMuaSA8IHRoaXMucHJvcHMub3JkZXIubGVuZ3RoIC0gMSkge1xuICAgICAgdGhpcy5wcm9wcy5pICs9IDE7XG4gICAgICB0aGlzLnByb3BzLm9yZGVyW3RoaXMucHJvcHMuaV0ub25Db21wbGV0ZSA9IHRoaXMucGxheU5leHQ7XG4gICAgICB0aGlzLnByb3BzLm9yZGVyW3RoaXMucHJvcHMuaV0uc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICBvblN0YXJ0KCkge1xuICAgIHRoaXMucHJvcHMuaSA9IDA7XG5cbiAgICB0aGlzLnByb3BzLm9yZGVyW3RoaXMucHJvcHMuaV0ub25Db21wbGV0ZSA9IHRoaXMucGxheU5leHQ7XG4gIH1cblxuICBvblN0b3AoKSB7XG4gICAgdGhpcy5wcm9wcy5vcmRlclt0aGlzLnByb3BzLmldLnN0b3AoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzZXF1ZW5jZShvcmRlcikge1xuICByZXR1cm4gbmV3IFNlcXVlbmNlKHsgb3JkZXIgfSk7XG59XG4iXX0=