'use strict';

exports.__esModule = true;
exports.default = physics;

var _Action3 = require('./Action');

var _Action4 = _interopRequireDefault(_Action3);

var _calc = require('../inc/calc');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var Physics = function (_Action) {
  _inherits(Physics, _Action);

  function Physics() {
    _classCallCheck(this, Physics);

    return _possibleConstructorReturn(this, _Action.apply(this, arguments));
  }

  Physics.prototype.onUpdate = function onUpdate(_ref) {
    var elapsed = _ref.elapsed;
    var velocity = this.props.velocity;

    // Apply acceleration

    velocity += (0, _calc.speedPerFrame)(this.acceleration, elapsed);

    // Apply friction
    velocity *= Math.pow(1 - this.friction, elapsed / 100);

    // Apply latest velocity
    this.current += (0, _calc.speedPerFrame)(velocity, elapsed);
  };

  return Physics;
}(_Action4.default);

var Spring = function (_Action2) {
  _inherits(Spring, _Action2);

  function Spring() {
    _classCallCheck(this, Spring);

    return _possibleConstructorReturn(this, _Action2.apply(this, arguments));
  }

  Spring.prototype.onUpdate = function onUpdate(_ref2) {
    var elapsed = _ref2.elapsed;

    var distanceToTarget = this.to - this.current;
    velocity += distanceToTarget * (0, _calc.speedPerFrame)(this.spring, elapsed);
  };

  return Spring;
}(_Action4.default);

Physics.valueProps = ['velocity', 'current'];

Physics.defaultProps = {
  acceleration: 0,
  spring: 0,
  to: 0
};

function physics(props) {
  return new Physics(props);
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zaW1wbGUtYWN0aW9ucy9waHlzaWNzLmpzIl0sIm5hbWVzIjpbInBoeXNpY3MiLCJQaHlzaWNzIiwib25VcGRhdGUiLCJlbGFwc2VkIiwidmVsb2NpdHkiLCJwcm9wcyIsImFjY2VsZXJhdGlvbiIsImZyaWN0aW9uIiwiY3VycmVudCIsIlNwcmluZyIsImRpc3RhbmNlVG9UYXJnZXQiLCJ0byIsInNwcmluZyIsInZhbHVlUHJvcHMiLCJkZWZhdWx0UHJvcHMiXSwibWFwcGluZ3MiOiI7OztrQkFvQ3dCQSxPOztBQXBDeEI7Ozs7QUFDQTs7Ozs7Ozs7OztJQUVNQyxPO1lBQUFBLE87O1dBQUFBLE87MEJBQUFBLE87Ozs7O0FBQUFBLFMsV0FDSkMsUSwyQkFBc0I7QUFBQSxRQUFYQyxPQUFXLFFBQVhBLE9BQVc7QUFBQSxRQUNkQyxRQURjLEdBQ0QsS0FBS0MsS0FESixDQUNkRCxRQURjOztBQUdwQjs7QUFDQUEsZ0JBQVkseUJBQWMsS0FBS0UsWUFBbkIsRUFBaUNILE9BQWpDLENBQVo7O0FBRUE7QUFDQUMseUJBQWEsSUFBSSxLQUFLRyxRQUF0QixFQUFvQ0osVUFBVSxHQUE5Qzs7QUFFQTtBQUNBLFNBQUtLLE9BQUwsSUFBZ0IseUJBQWNKLFFBQWQsRUFBd0JELE9BQXhCLENBQWhCO0FBQ0QsRzs7U0FaR0YsTzs7O0lBZUFRLE07WUFBQUEsTTs7V0FBQUEsTTswQkFBQUEsTTs7Ozs7QUFBQUEsUSxXQUNKUCxRLDRCQUFzQjtBQUFBLFFBQVhDLE9BQVcsU0FBWEEsT0FBVzs7QUFDcEIsUUFBTU8sbUJBQW1CLEtBQUtDLEVBQUwsR0FBVSxLQUFLSCxPQUF4QztBQUNBSixnQkFBWU0sbUJBQW1CLHlCQUFjLEtBQUtFLE1BQW5CLEVBQTJCVCxPQUEzQixDQUEvQjtBQUNELEc7O1NBSkdNLE07OztBQU9OUixRQUFRWSxVQUFSLEdBQXFCLENBQ25CLFVBRG1CLEVBRW5CLFNBRm1CLENBQXJCOztBQUtBWixRQUFRYSxZQUFSLEdBQXVCO0FBQ3JCUixnQkFBYyxDQURPO0FBRXJCTSxVQUFRLENBRmE7QUFHckJELE1BQUk7QUFIaUIsQ0FBdkI7O0FBTWUsU0FBU1gsT0FBVCxDQUFpQkssS0FBakIsRUFBd0I7QUFDckMsU0FBTyxJQUFJSixPQUFKLENBQVlJLEtBQVosQ0FBUDtBQUNEIiwiZmlsZSI6InBoeXNpY3MuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQWN0aW9uIGZyb20gJy4vQWN0aW9uJztcbmltcG9ydCB7IHNwZWVkUGVyRnJhbWUgfSBmcm9tICcuLi9pbmMvY2FsYyc7XG5cbmNsYXNzIFBoeXNpY3MgZXh0ZW5kcyBBY3Rpb24ge1xuICBvblVwZGF0ZSh7IGVsYXBzZWQgfSkge1xuICAgIGxldCB7IHZlbG9jaXR5IH0gPSB0aGlzLnByb3BzO1xuXG4gICAgLy8gQXBwbHkgYWNjZWxlcmF0aW9uXG4gICAgdmVsb2NpdHkgKz0gc3BlZWRQZXJGcmFtZSh0aGlzLmFjY2VsZXJhdGlvbiwgZWxhcHNlZCk7XG5cbiAgICAvLyBBcHBseSBmcmljdGlvblxuICAgIHZlbG9jaXR5ICo9ICgxIC0gdGhpcy5mcmljdGlvbikgKiogKGVsYXBzZWQgLyAxMDApO1xuXG4gICAgLy8gQXBwbHkgbGF0ZXN0IHZlbG9jaXR5XG4gICAgdGhpcy5jdXJyZW50ICs9IHNwZWVkUGVyRnJhbWUodmVsb2NpdHksIGVsYXBzZWQpO1xuICB9XG59XG5cbmNsYXNzIFNwcmluZyBleHRlbmRzIEFjdGlvbiB7XG4gIG9uVXBkYXRlKHsgZWxhcHNlZCB9KSB7XG4gICAgY29uc3QgZGlzdGFuY2VUb1RhcmdldCA9IHRoaXMudG8gLSB0aGlzLmN1cnJlbnQ7XG4gICAgdmVsb2NpdHkgKz0gZGlzdGFuY2VUb1RhcmdldCAqIHNwZWVkUGVyRnJhbWUodGhpcy5zcHJpbmcsIGVsYXBzZWQpO1xuICB9XG59XG5cblBoeXNpY3MudmFsdWVQcm9wcyA9IFtcbiAgJ3ZlbG9jaXR5JyxcbiAgJ2N1cnJlbnQnXG5dO1xuXG5QaHlzaWNzLmRlZmF1bHRQcm9wcyA9IHtcbiAgYWNjZWxlcmF0aW9uOiAwLFxuICBzcHJpbmc6IDAsXG4gIHRvOiAwXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwaHlzaWNzKHByb3BzKSB7XG4gIHJldHVybiBuZXcgUGh5c2ljcyhwcm9wcyk7XG59O1xuIl19